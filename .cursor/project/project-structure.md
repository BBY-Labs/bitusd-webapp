# Project Structure

This document outlines the recommended project structure for the `bitusd-app`, which uses React Router for the frontend, Hono as the web framework on Cloudflare Workers, and tRPC for API communication.

## Directory Tree

```
bitusd-app/
├── .cursor/
│   └── project/
│       └── project-structure.md  # This file
├── .react-router/                # Generated by React Router Vite plugin
├── .vscode/                      # VS Code editor settings
├── .wrangler/                    # Cloudflare Wrangler local state
├── app/                          # React Router frontend application
│   ├── components/
│   │   ├── ui/                   # Shadcn UI components
│   │   └── shared/               # Other shared components
│   ├── lib/
│   │   ├── trpc.ts               # tRPC client setup
│   │   ├── utils/
│   │   └── constants.ts
│   ├── routes/                   # View components for routes (e.g., home.tsx)
│   │   ├── home.tsx              # Example route view/component
│   │   └── ...                   # Other route views/components
│   ├── styles/
│   │   └── app.css               # Main stylesheet (Tailwind)
│   ├── types/
│   │   ├── index.d.ts            # General frontend types
│   │   └── react-router.d.ts     # React Router AppLoadContext types
│   ├── entry.server.tsx          # Server entry point for React Router SSR
│   ├── root.tsx                  # Root layout component for the application
│   └── routes.ts                 # React Router route definitions
├── build/                        # Vite build output
│   ├── client/
│   └── server/
├── public/                       # Static assets (favicon, images, etc.)
├── workers/                      # Cloudflare Worker & Hono backend
│   ├── app.ts                    # Main Hono app entry (wrangler.jsonc main)
│   ├── router.ts                 # Main tRPC appRouter definition & createCaller
│   ├── trpc.ts                   # Core tRPC initialization (initTRPC, context, procedures)
│   ├── routers/                  # Sub-routers for tRPC
│   │   ├── test.ts               # Example test tRPC sub-router
│   │   └── ...                   # Other tRPC sub-routers
│   ├── services/                 # Optional: Business logic services
│   │   ├── auth.service.ts
│   │   └── ...
│   ├── middleware/               # Optional: Custom Hono middleware
│   │   └── ...
│   └── scheduled.ts              # Optional: Cloudflare Cron Trigger handlers
├── .dev.vars                     # Local dev env vars (Wrangler)
├── .env.development              # Vite env vars (dev)
├── .env.production               # Vite env vars (prod)
├── .gitignore
├── package.json
├── pnpm-lock.yaml
├── react-router.config.ts
├── README.md
├── tsconfig.cloudflare.json      # TS config for workers/
├── tsconfig.json                 # Base TS config
├── tsconfig.node.json            # TS config for Node.js files
├── vite.config.ts
├── worker-configuration.d.ts     # Cloudflare Worker bindings (Env interface)
└── wrangler.jsonc                # Cloudflare Wrangler configuration
```

## Key Directories Explained

### Root Directory

- **`.cursor/`**: Cursor-specific files.
- **`.react-router/`**: Generated by React Router's Vite plugin (types, build info).
- **`.vscode/`**: VS Code editor settings.
- **`.wrangler/`**: Cloudflare Wrangler local development state and deployment cache.
- **`app/`**: Contains the entire React Router frontend application.
- **`build/`**: Output directory for the Vite build (client and server assets).
- **`public/`**: Static assets (e.g., `favicon.ico`, images, fonts) that are served directly.
- **`workers/`**: Cloudflare Worker specific code, including Hono setup and tRPC routers.
- **Configuration Files**: Various `.json`, `.ts`, `.yaml`, `.md`, `.vars` files for project setup, dependencies, TypeScript, Vite, Wrangler, and environment variables.

### `app/` Directory (React Router Frontend)

Houses all the code related to the client-side React application.

- **`components/`**: Reusable React components.
  - `ui/`: Specifically for Shadcn UI components or similar pre-built component libraries.
  - `shared/`: Other shared components across different routes.
- **`lib/`**: Client-side libraries, helpers, and configurations.
  - `trpc.ts`: tRPC client setup and typed proxy.
  - `utils/`: General utility functions for the frontend.
  - `constants.ts`: Frontend-specific constants.
- **`routes/`**: Contains the actual UI components for your routes (e.g., what to render for `/home`). Loaders and actions are typically co-located here.
- **`styles/`**: Global styles and Tailwind CSS setup.
- **`types/`**: Frontend-specific TypeScript type definitions.
  - `index.d.ts`: General frontend type definitions.
  - `react-router.d.ts`: Module augmentation for React Router, especially for `AppLoadContext` typing.
- **`entry.server.tsx`**: The server-side entry point for handling requests and rendering the React application in SSR environments.
- **`root.tsx`**: Defines the root layout of your application, including HTML structure, global context providers (like tRPC and React Query), and error boundaries.
- **`routes.ts`**: Configuration file that defines your application's routes for React Router (often used with the Vite plugin).

### `workers/` Directory (Cloudflare Worker & Hono Backend)

Contains all server-side logic running on Cloudflare Workers.

- **`app.ts`**: The main entry point for the Cloudflare Worker. Initializes the Hono application, sets up middleware (like tRPC), and defines catch-all routes for React Router SSR. This file is specified as the `main` script in `wrangler.jsonc`.
- **`router.ts`**: Defines the main `appRouter` by merging various sub-routers from the `routers/` directory. Also exports `createCaller` for server-side procedure calls (e.g., in loaders).
- **`trpc.ts`**: Core tRPC setup. Initializes `initTRPC`, defines the context (`HonoContext`), and exports base procedures (`publicProcedure`), the `router` factory, and `middleware` factory. This file is imported by `router.ts` and individual sub-routers in `routers/`.
- **`routers/`**: Directory containing individual tRPC sub-routers, which are then merged in `router.ts`.
  - Other `.ts` files for specific tRPC routers (e.g., `test.ts`, `user.ts`).
- **`services/`**: Business logic or services that are used by tRPC procedures or Hono handlers.
- **`middleware/`**: (Optional) Custom Hono middleware.
